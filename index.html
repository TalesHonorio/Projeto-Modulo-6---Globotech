<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GloboTasks</title>

  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Sulphur+Point:wght@300;400;700&display=swap" rel="stylesheet" />
  <link rel="icon" href="assets/globotask.png" type="image/png" />
</head>

<body>
  <header>
    <div class="logo">
      <img src="assets/globotask.png" alt="logo globotask" />
      <div class="logo-text">
        <h1>Globo<span class="especial">Tasks</span></h1>
        <h4>Cada tarefa concluída é um passo para o sucesso</h4>
      </div>
    </div>

    <nav class="menu-lateral" aria-label="Menu lateral">
      <ul>
        <li class="icon-list"><a href="listas.html" aria-label="Listas"></a></li>
        <li class="icon-user"><a href="usuarios.html" aria-label="Usuários"></a></li>
        <li class="icon-add-user"><a href="cria-user.html" aria-label="Criar usuário"></a></li>
        <li class="icon-config"><a href="conta.html" aria-label="Conta"></a></li>
      </ul>
    </nav>
  </header>

  <section class="content-home">
    <div class="content-home-text">
      <h3>Ótimo para tarefas de grupo, perfeito para você!</h3>
      <h3>Crie já sua conta!</h3>
    </div>

    <div class="formulario">
      <form id="formCadastro" action="cria-user.html" method="get">
        <h4>Crie sua conta</h4>

        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="digite seu email"
          required
          autocomplete="email"
        />

        <label for="senha1">Senha</label>
        <input
          type="password"
          id="senha1"
          name="senha"
          placeholder="crie sua senha"
          required
          minlength="6"
          autocomplete="new-password"
        />

        <label for="senha2">Confirme a senha</label>
        <input
          type="password"
          id="senha2"
          name="confirma_senha"
          placeholder="digite a senha criada"
          required
          autocomplete="new-password"
        />

        <div class="checkbox-container">
          <input type="checkbox" name="termos" id="termos" required />
          <label for="termos">
            <small>aceito <a href="#">termos e condições</a></small>
          </label>
        </div>

        <button type="submit">criar</button>
      </form>
    </div>
  </section>

  <script>
    const form = document.getElementById("formCadastro");
    const senha1 = document.getElementById("senha1");
    const senha2 = document.getElementById("senha2");

    // Mensagens personalizadas para campos obrigatórios / minlength
    function configurarMensagem(input, rotulo) {
      input.addEventListener("invalid", () => {
        if (input.validity.valueMissing) {
          input.setCustomValidity(`O campo "${rotulo}" é obrigatório.`);
        } else if (input.validity.tooShort) {
          input.setCustomValidity(
            `"${rotulo}" deve ter pelo menos ${input.minLength} caracteres.`
          );
        } else if (input.type === "email" && input.validity.typeMismatch) {
          input.setCustomValidity(`Informe um email válido.`);
        } else {
          input.setCustomValidity("");
        }
      });
      input.addEventListener("input", () => input.setCustomValidity(""));
    }

    configurarMensagem(document.getElementById("email"), "Email");
    configurarMensagem(senha1, "Senha");
    configurarMensagem(senha2, "Confirme a senha");

    form.addEventListener("submit", function (event) {
      // Se campos obrigatórios falharem, interrompe e mostra mensagens nativas
      if (!form.checkValidity()) {
        event.preventDefault();
        form.reportValidity();
        return;
      }

      // Validação de senhas iguais
      if (senha1.value !== senha2.value) {
        event.preventDefault();
        alert("As senhas não coincidem!");
        senha2.focus();
        return;
      }

      // Opcional: regras extras de senha (maiúscula, número, especial)
      // const forte = /^(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]).{6,}$/;
      // if (!forte.test(senha1.value)) {
      //   event.preventDefault();
      //   alert("A senha deve ter ao menos 1 letra maiúscula, 1 número e 1 caractere especial.");
      //   senha1.focus();
      //   return;
      // }

      // Deixe enviar normalmente para cria-user.html (método GET)
      // Se preferir redirecionar manualmente:
      // event.preventDefault();
      // window.location.href = "cria-user.html";
    });
  </script>
</body>
</html>
