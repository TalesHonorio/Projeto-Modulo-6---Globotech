<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GloboTasks - Criar Usuário</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Sulphur+Point:wght@300;400;700&display=swap" rel="stylesheet" />
  <link rel="icon" href="assets/globotask.png" type="image/png" />
</head>

<body>
  <header>
    <div class="header">
      <div class="logo">
        <img src="assets/globotask.png" alt="Logo GloboTasks" />
        <div class="logo-text">
          <h1>Globo<span class="especial">Tasks</span></h1>
          <h4>Cada tarefa concluída é um passo para o sucesso</h4>
        </div>
      </div>

      <div class="page-title">
        <h2>Criar usuário</h2>
      </div>
    </div>

    <nav class="menu-lateral" aria-label="Menu lateral">
      <ul>
        <li class="icon-list"><a href="listas.html" aria-label="Listas"></a></li>
        <li class="icon-user"><a href="usuarios.html" aria-label="Usuários"></a></li>
        <li class="icon-add-user"><a href="cria-user.html" aria-label="Criar usuário"></a></li>
        <li class="icon-config"><a href="conta.html" aria-label="Conta"></a></li>
      </ul>
    </nav>
  </header>

  <section class="content-home">
    <div class="content-home-text">
      <h3>Crie um usuário e uma primeira lista para ele!</h3>
    </div>

    <div class="formulario">
      <!-- Envia para a próxima página já com os dados na URL -->
      <form id="formCriaUsuario" action="nova-lista.html" method="get" novalidate>
        <h4>Crie um usuário</h4>

        <label for="nome">Nome</label>
        <input 
          type="text" id="nome" name="nome" 
          placeholder="nome do usuário" 
          required minlength="2" autocomplete="name" />

        <label for="lista">Nome da Lista</label>
        <input 
          type="text" id="lista" name="lista" 
          placeholder="nome da primeira lista" 
          required minlength="2" />

        <small>Não se preocupe, outras listas podem ser criadas depois.</small>

        <button type="submit">criar</button>
      </form>
    </div>
  </section>

  <script>
    // Mensagens amigáveis + validação nativa
    const form = document.getElementById('formCriaUsuario');
    const nome = document.getElementById('nome');
    const lista = document.getElementById('lista');

    function setMsgsCustomizadas(input, label) {
      input.addEventListener('invalid', () => {
        if (input.validity.valueMissing) {
          input.setCustomValidity(`O campo "${label}" é obrigatório.`);
        } else if (input.validity.tooShort) {
          input.setCustomValidity(`"${label}" deve ter pelo menos ${input.minLength} caracteres.`);
        } else {
          input.setCustomValidity('');
        }
      });
      input.addEventListener('input', () => input.setCustomValidity(''));
    }

    setMsgsCustomizadas(nome, 'Nome');
    setMsgsCustomizadas(lista, 'Nome da Lista');

    // Se preferir impedir o envio se inválido (para não recarregar a página):
    form.addEventListener('submit', (e) => {
      if (!form.checkValidity()) {
        e.preventDefault(); // evita navegação se houver erro
        form.reportValidity(); // exibe mensagens nativas
      }
      // Se estiver válido, o GET leva para nova-lista.html?nome=...&lista=...
    });
  </script>
</body>
</html>
